<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Install ECE | Elastic Cloud Enterprise Reference (install reorg draft 2020-05-14) [master] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference (install reorg draft 2020-05-14) [master]"/>
<link rel="up" href="ece-install-cloud.html" title="Install on a public cloud"/>
<link rel="prev" href="ece-ce-config-os-cloud.html" title="Configure your operating system"/>
<link rel="next" href="ece-ce-ui-cloud.html" title="Log into the Cloud UI"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/master"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference (install reorg draft 2020-05-14) [master]</a></span>
»
<span class="breadcrumb-link"><a href="ece-ce-install-ece.html">Installing Elastic Cloud Enterprise</a></span>
»
<span class="breadcrumb-link"><a href="ece-install-cloud.html">Install on a public cloud</a></span>
»
<span class="breadcrumb-node">Install ECE</span>
</div>
<div class="navheader">
<span class="prev">
<a href="ece-ce-config-os-cloud.html">« Configure your operating system</a>
</span>
<span class="next">
<a href="ece-ce-ui-cloud.html">Log into the Cloud UI »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ece-ce-install-cloud"></a>Install ECE</h2>
</div></div></div>
<p>Choose the Elastic Cloud Enterprise deployment scenario that best fits your business needs:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="ece-ce-install-cloud.html#ece-ce-install-small-cloud" title="Deploy a small installation">Deploy a small installation</a>: For development, test, and small-scale use cases.
</li>
<li class="listitem">
<a class="xref" href="ece-ce-install-cloud.html#ece-ce-install-medium-cloud" title="Deploy a medium installation">Deploy a medium installation</a>: For many production setups.
</li>
<li class="listitem">
<a class="xref" href="ece-ce-install-cloud.html#ece-ce-install-large-cloud" title="Deploy a large installation">Deploy a large installation</a>: For deployments with significant overall search and indexing throughput.
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ece-ce-install-small-cloud"></a>Deploy a small installation</h3>
</div></div></div>
<p>The type of installation is recommended for development, test, and small-scale use cases.
You need:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
3 hosts with 128 GB RAM
</li>
<li class="listitem">
3 availability zones
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ece-pb-3.png" alt="A small baseline installation with three hosts across three availability zones">
</div>
</div>
<p>Perform the numbered steps on more than one host, as indicated in the illustration.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ce_before_you_start"></a>Before you start</h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This type of installation is <span class="strong strong"><strong>not recommended for high-traffic workloads</strong></span>.
</li>
<li class="listitem">
Avoid ECE installations with <span class="strong strong"><strong>spinning disks</strong></span> as these are not supported.
</li>
<li class="listitem">
Note that the small-size ECE installation keeps the directors and coordinators roles (ECE management services) on the same hosts as your allocators and proxies.
</li>
</ul>
</div>
<details>
<summary class="title"><span class="strong strong"><strong>Check the recommended JVM Heap sizes</strong></span></summary>
<div class="content">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Service</th>
<th align="left" valign="top">JVM Heap Size (Xms and Xmx)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">runner</code></p></td>
<td align="left" valign="top"><p>1 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">allocator</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">proxy</code></p></td>
<td align="left" valign="top"><p>8 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">zookeeper</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">director</code></p></td>
<td align="left" valign="top"><p>1 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">constructor</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">admin-console</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ce_installation_steps"></a>Installation steps</h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Install Elastic Cloud Enterprise on the first host to start a new installation with your first availability zone. This first host holds all runner roles to help bootstrap the rest of the installation. You must define the memory configurations for each role: <code class="literal">"zookeeper":{"xms":"4G","xmx":"4G"}</code>. Otherwise, the default settings will be used.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install
   --availability-zone MY_ZONE-1
   --memory-settings
   '{"runner":{"xms":"1G","xmx":"1G"},
   "allocator":{"xms":"4G","xmx":"4G"},
   "proxy":{"xms":"8G","xmx":"8G"},
   "zookeeper":{"xms":"4G","xmx":"4G"},
   "director":{"xms":"1G","xmx":"1G"},
   "constructor":{"xms":"4G","xmx":"4G"},
   "admin-console":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
<p>After the installation completes, copy down the coordinator host IP address, user credentials and roles token information. Keep this information safe.</p>
</li>
<li class="listitem">
<p>Generate a new roles token that persists for one hour on the first host, so that other hosts can join your installation with the right role permissions in the next step (referred to as <code class="literal">MY_TOKEN</code>). The new token needs to enable all runner roles, which none of the tokens automatically generated by the installation on the first host provide.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl -k -H 'Content-Type: application/json' -u admin:PASSWORD https://localhost:12443/api/v1/platform/configuration/security/enrollment-tokens -d '{ "persistent": false, "roles": ["director", "coordinator", "proxy", "allocator"] }'</pre>
</div>
</li>
<li class="listitem">
<p>Install Elastic Cloud Enterprise on a second and third host, placing them into a second and a third availability zone, and assign them the same roles and memory settings as the first host. Make sure you include the coordinator host IP information from Step 1 and the new roles token from Step 2.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'MY_TOKEN' --roles "director,coordinator,proxy,allocator" --availability-zone MY_ZONE-2 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"allocator":{"xms":"4G","xmx":"4G"},"proxy":{"xms":"8G","xmx":"8G"},"zookeeper":{"xms":"4G","xmx":"4G"},"director":{"xms":"1G","xmx":"1G"},"constructor":{"xms":"4G","xmx":"4G"},"admin-console":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'MY_TOKEN' --roles "director,coordinator,proxy,allocator" --availability-zone MY_ZONE-3 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"allocator":{"xms":"4G","xmx":"4G"},"proxy":{"xms":"8G","xmx":"8G"},"zookeeper":{"xms":"4G","xmx":"4G"},"director":{"xms":"1G","xmx":"1G"},"constructor":{"xms":"4G","xmx":"4G"},"admin-console":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
</li>
</ol>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ece-ce-install-medium-cloud"></a>Deploy a medium installation</h3>
</div></div></div>
<p>This type of installation is recommended for many production setups.
You need:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
3 hosts with at least 32 GB RAM each for directors and coordinators (ECE management services), and proxies
</li>
<li class="listitem">
3 hosts with 256 GB RAM each for allocators
</li>
<li class="listitem">
3 availability zones
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ece-pb-6.png" alt="A large installation with nine to twelve hosts across three availability zones">
</div>
</div>
<p>Perform the numbered steps on more than one host, as indicated in the illustration.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ce_before_you_start_2"></a>Before you start</h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Monitor the load on proxies and make sure the volume of user requests routed by the proxies does not affect the resources available to the ECE management services.
</li>
<li class="listitem">
Avoid ECE installations with <span class="strong strong"><strong>spinning disks</strong></span> as these are not supported.
</li>
<li class="listitem">
Note that the large-sized Elastic Cloud Enterprise installation separates the allocator and proxy roles from the director and coordinator roles (ECE management services).
</li>
</ul>
</div>
<details>
<summary class="title"><span class="strong strong"><strong>Check the recommended JVM Heap sizes</strong></span></summary>
<div class="content">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Service</th>
<th align="left" valign="top">JVM Heap Size (Xms and Xmx)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">runner</code></p></td>
<td align="left" valign="top"><p>1 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">allocator</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">proxy</code></p></td>
<td align="left" valign="top"><p>8 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">zookeeper</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">director</code></p></td>
<td align="left" valign="top"><p>1 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">constructor</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">admin-console</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ce_installation_steps_2"></a>Installation steps</h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Install Elastic Cloud Enterprise on the first host to start a new installation with your first availability zone. This first host holds all runner roles to help bootstrap the rest of the installation, but you will remove some of its roles in a later step. You must define the memory configurations for each role: <code class="literal">"zookeeper":{"xms":"4G","xmx":"4G"}</code>. Otherwise, the default settings will be used.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install
  --availability-zone MY_ZONE-1
  --memory-settings
  '{"runner":{"xms":"1G","xmx":"1G"},
  "proxy":{"xms":"8G","xmx":"8G"},
  "zookeeper":{"xms":"4G","xmx":"4G"},
  "director":{"xms":"1G","xmx":"1G"},
  "constructor":{"xms":"4G","xmx":"4G"},
  "admin-console":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
<p>After the installation completes, copy down the coordinator host IP address, user credentials and roles token information. Keep this information safe.</p>
</li>
<li class="listitem">
<p>Generate a new roles token that persists for one hour on the first host, so that other hosts can join your installation with the right role permissions in the next step (referred to as <code class="literal">MY_TOKEN</code>). The new token needs to enable the director, coordinator and proxy runner roles.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl -k -H 'Content-Type: application/json' -u admin:PASSWORD https://localhost:12443/api/v1/platform/configuration/security/enrollment-tokens -d '{ "persistent": false, "roles": ["director", "coordinator", "proxy"] }'</pre>
</div>
</li>
<li class="listitem">
<p>Install Elastic Cloud Enterprise on a second and third host, placing them into a second and a third availability zone, and assign them the <code class="literal">director</code>, <code class="literal">coordinator</code> and <code class="literal">proxy</code> roles. Do not assign the <code class="literal">allocator</code> role, as these runners should not handle any user requests. Make sure you include the coordinator host IP information from Step 1 and the new roles token from Step 2.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'MY_TOKEN' --roles "director,coordinator,proxy" --availability-zone MY_ZONE-2 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"proxy":{"xms":"8G","xmx":"8G"},"zookeeper":{"xms":"4G","xmx":"4G"},"director":{"xms":"1G","xmx":"1G"},"constructor":{"xms":"4G","xmx":"4G"},"admin-console":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'MY_TOKEN' --roles "director,coordinator,proxy" --availability-zone MY_ZONE-3 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"proxy":{"xms":"8G","xmx":"8G"},"zookeeper":{"xms":"4G","xmx":"4G"},"director":{"xms":"1G","xmx":"1G"},"constructor":{"xms":"4G","xmx":"4G"},"admin-console":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
</li>
<li class="listitem">
<p>To handle the Elasticsearch and Kibana workload, install Elastic Cloud Enterprise on a fourth, fifth, and sixth host, distributing them evenly across the existing three availability zones and assign them the <code class="literal">allocator</code> role. Make sure you include the coordinator host IP information and allocator roles token from Step 1.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'ALLOCATOR_TOKEN' --roles "allocator" --availability-zone MY_ZONE-1 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"allocator":{"xms":"4G","xmx":"4G"}}'

bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'ALLOCATOR_TOKEN' --roles "allocator" --availability-zone MY_ZONE-2 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"allocator":{"xms":"4G","xmx":"4G"}}'

bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'ALLOCATOR_TOKEN' --roles "allocator" --availability-zone MY_ZONE-3 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"allocator":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
</li>
</ol>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ece-ce-install-large-cloud"></a>Deploy a large installation</h3>
</div></div></div>
<p>This type of installation is recommended for deployments with significant overall search and indexing throughput.
You need:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
3 hosts with at least 32 GB RAM each for directors and coordinators (ECE management services)
</li>
<li class="listitem">
3 or more hosts with 256 GB RAM each for allocators
</li>
<li class="listitem">
3 hosts with 16 GB RAM each for proxies
</li>
<li class="listitem">
3 availability zones
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ece-pb-9.png" alt="A large installation with nine to twelve hosts across three availability zones">
</div>
</div>
<p>Perform the numbered steps on more than one host, as indicated in the illustration.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ce_before_you_start_3"></a>Before you start</h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Avoid ECE installations with <span class="strong strong"><strong>spinning disks</strong></span> as these are not supported.
</li>
<li class="listitem">
Note that the large-sized Elastic Cloud Enterprise installation separates the allocator and proxy roles from the director and coordinator roles (ECE management services).
</li>
</ul>
</div>
<details>
<summary class="title"><span class="strong strong"><strong>Check the recommended JVM Heap sizes</strong></span></summary>
<div class="content">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Service</th>
<th align="left" valign="top">JVM Heap Size (Xms and Xmx)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">runner</code></p></td>
<td align="left" valign="top"><p>1 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">allocator</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">proxy</code></p></td>
<td align="left" valign="top"><p>8 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">zookeeper</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">director</code></p></td>
<td align="left" valign="top"><p>1 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">constructor</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">admin-console</code></p></td>
<td align="left" valign="top"><p>4 GB</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ce_installation_steps_3"></a>Installation steps</h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Install Elastic Cloud Enterprise on the first host to start a new installation with your first availability zone. This first host holds all runner roles to help bootstrap the rest of the installation, but you will remove some of its roles in a later step. You must define the memory configurations for each role: <code class="literal">"zookeeper":{"xms":"4G","xmx":"4G"}</code>. Otherwise, the default settings will be used.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install
  --availability-zone MY_ZONE-1
  --memory-settings
  '{"runner":{"xms":"1G","xmx":"1G"},
  "proxy":{"xms":"8G","xmx":"8G"},
  "zookeeper":{"xms":"4G","xmx":"4G"},
  "director":{"xms":"1G","xmx":"1G"},
  "constructor":{"xms":"4G","xmx":"4G"},
  "admin-console":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
<p>After the installation completes, copy down the coordinator host IP address, user credentials and roles token information. Keep this information safe.</p>
</li>
<li class="listitem">
<p>Generate a new roles token that persists for one hour on the first host, so that other hosts can join your installation with the right role permissions in subsequent steps (referred to as <code class="literal">MY_TOKEN</code>). The new token needs to enable the director, coordinator and proxy runner roles.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl -k -H 'Content-Type: application/json' -u admin:PASSWORD https://localhost:12443/api/v1/platform/configuration/security/enrollment-tokens -d '{ "persistent": false, "roles": ["director", "coordinator", "proxy"] }'</pre>
</div>
</li>
<li class="listitem">
<p>Install Elastic Cloud Enterprise on a second and third host, placing them into a second and a third availability zone, and assign them the <code class="literal">director</code> and <code class="literal">coordinator</code> roles. Do not assign the <code class="literal">allocator</code> or the <code class="literal">proxy</code> role, as these runners should not handle or route any user requests. Make sure you include the coordinator host IP information from Step 1 and the new roles token from Step 2.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'MY_TOKEN' --roles "director,coordinator" --availability-zone MY_ZONE-2 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"zookeeper":{"xms":"4G","xmx":"4G"},"director":{"xms":"1G","xmx":"1G"},"constructor":{"xms":"4G","xmx":"4G"},"admin-console":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'MY_TOKEN' --roles "director,coordinator" --availability-zone MY_ZONE-3 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"zookeeper":{"xms":"4G","xmx":"4G"},"director":{"xms":"1G","xmx":"1G"},"constructor":{"xms":"4G","xmx":"4G"},"admin-console":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
</li>
<li class="listitem">
<p>To handle the Elasticsearch and Kibana workload, install Elastic Cloud Enterprise on three or more hosts, distributing them evenly across the existing three availability zones, or on however many hosts you think you need initially, and assign them the <code class="literal">allocator</code> role. Make sure you include the coordinator host IP information and allocator roles token from Step 1.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'ALLOCATOR_TOKEN' --roles "allocator" --availability-zone MY_ZONE-1 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"allocator":{"xms":"4G","xmx":"4G"}}'

bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'ALLOCATOR_TOKEN' --roles "allocator" --availability-zone MY_ZONE-2 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"allocator":{"xms":"4G","xmx":"4G"}}'

bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'ALLOCATOR_TOKEN' --roles "allocator" --availability-zone MY_ZONE-3 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"allocator":{"xms":"4G","xmx":"4G"}}'</pre>
</div>
</li>
<li class="listitem">
<p>To handle the routing of user requests to Elasticsearch, install Elastic Cloud Enterprise on a three additional hosts, distributing them evenly across the existing three availability zones, and assign them the <code class="literal">proxy</code> role. Do not assign any other roles, as these runners should only route user requests. Make sure you include the coordinator host IP information from Step 1 and the new roles token from Step 2.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'MY_TOKEN' --roles "proxy" --availability-zone MY_ZONE-1 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"proxy":{"xms":"8G","xmx":"8G"}}'

bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'MY_TOKEN' --roles "proxy" --availability-zone MY_ZONE-2 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"proxy":{"xms":"8G","xmx":"8G"}}'

bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host HOST_IP --roles-token 'MY_TOKEN' --roles "proxy" --availability-zone MY_ZONE-3 --memory-settings '{"runner":{"xms":"1G","xmx":"1G"},"proxy":{"xms":"8G","xmx":"8G"}}'</pre>
</div>
</li>
<li class="listitem">
Modify the first host you installed Elastic Cloud Enterprise on to prevent it from handling or routing user requests:
</li>
</ol>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="ece-ce-config-os-cloud.html">« Configure your operating system</a>
</span>
<span class="next">
<a href="ece-ce-ui-cloud.html">Log into the Cloud UI »</a>
</span>
</div>
</div>
</body>
</html>
