<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configure a snapshot repository using GCS
        | Elasticsearch Service Documentation [master]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Service Documentation [master]" /><link rel="up" href="ec-custom-repository.html" title="Snapshot and restore with custom repositories" /><link rel="prev" href="ec-aws-custom-repository.html" title="Configure a snapshot repository using AWS" /><link rel="next" href="ec-billing.html" title="Your account and billing" /><meta name="DC.type" content="Learn/Docs/Cloud/Reference/master" /><meta name="DC.subject" content="Elastic Cloud" /><meta name="DC.identifier" content="master" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Service Documentation
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="ec-snapshot-restore.html">Snapshot and restore</a></span> » <span class="breadcrumb-link"><a href="ec-custom-repository.html">Snapshot and restore with custom repositories</a></span> » <span class="breadcrumb-node">Configure a snapshot repository using GCS</span></div><div class="navheader"><span class="prev"><a href="ec-aws-custom-repository.html">
              « 
              Configure a snapshot repository using AWS</a>
           
        </span><span class="next">
           
          <a href="ec-billing.html">Your account and billing
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ec-gcs-snapshotting"></a>Configure a snapshot repository using GCS</h2></div></div></div><p>To configure a custom repository using your GCS account, create the bucket with your custom GCS account. Make sure the bucket is in the same region as your cluster.</p><h4><a id="ec-configure-gcs-keystore"></a>Configure the keystore</h4><p>Create an entry for the GCS client in the Elasticsearch keystore:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Log into the <a class="ulink" href="https://cloud.elastic.co/" target="_top">Elasticsearch Service Console</a>.
</li><li class="listitem">
Create a deployment with an Elasticsearch cluster that has the <code class="literal">repository-gcs</code> plugin enabled.
</li><li class="listitem">
From your deployment menu, go to the <span class="strong strong"><strong>Security</strong></span> page, then click <span class="strong strong"><strong>Create settings</strong></span> to create an Elasticsearch keystore entry.
</li><li class="listitem"><p class="simpara">
Enter the <span class="strong strong"><strong>Setting name</strong></span>, click <span class="strong strong"><strong>Multiple strings</strong></span> or <span class="strong strong"><strong>JSON block / file</strong></span>, then specify the options.
</p><p class="simpara">For more information on how to configure these settings, click the <span class="strong strong"><strong>GCS clients</strong></span> example.</p></li><li class="listitem">
Click <span class="strong strong"><strong>Save</strong></span>.
</li></ol></div><h4><a id="ec-create-gcs-repository"></a>Create the repository</h4><p>With the bucket ready, you can create a repository by <code class="literal">PUT</code>-ing the following to <code class="literal">/_snapshot/repository_name</code>:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">{
  "type": "s3",
  "settings": {
    "bucket": "name-of-bucket",
    "region": "region-of-bucket-same-as-cluster",
    "access_key": "YOURKEYHERE",
    "secret_key": "secret-key-with-just-permission-to-that-bucket-do-not-use-a-master-key",
    "compress": true
  }
}</pre></div></div><div class="navfooter"><span class="prev"><a href="ec-aws-custom-repository.html">
              « 
              Configure a snapshot repository using AWS</a>
           
        </span><span class="next">
           
          <a href="ec-billing.html">Your account and billing
               »
            </a></span></div></body></html>
