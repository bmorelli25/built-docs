<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configure the internal queue
        | Filebeat Reference [6.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Filebeat Reference [6.1]" /><link rel="up" href="configuring-howto-filebeat.html" title="Configuring Filebeat" /><link rel="prev" href="_live_reloading.html" title="Live reloading" /><link rel="next" href="configuring-output.html" title="Configure the output" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Filebeat/Reference/6.1" /><meta name="DC.subject" content="Filebeat" /><meta name="DC.identifier" content="6.1" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Filebeat Reference
      [6.1]
    </a></span> » <span class="breadcrumb-link"><a href="configuring-howto-filebeat.html">Configuring Filebeat</a></span> » <span class="breadcrumb-node">Configure the internal queue</span></div><div class="navheader"><span class="prev"><a href="_live_reloading.html">
              « 
              Live reloading</a>
           
        </span><span class="next">
           
          <a href="configuring-output.html">Configure the output
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="configuring-internal-queue"></a>Configure the internal queue<a href="https://github.com/elastic/beats/edit/6.1/libbeat/docs/queueconfig.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Filebeat uses an internal queue to store events before publishing them. The
queue is responsible for buffering and combining events into batches that can
be consumed by the outputs. The outputs will use bulk operations to send a
batch of events in one transaction.</p><p>You can configure the type and behavior of the internal queue by setting options in the <code class="literal">queue</code> section of the <code class="literal">filebeat.yml</code> config file.</p><p>Example configuration:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">queue.mem:
  events: 4096</pre></div><h3><a id="configuration-internal-queue-memory"></a>Configure the memory queue<a href="https://github.com/elastic/beats/edit/6.1/libbeat/docs/queueconfig.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The memory queue keeps all events in memory. It is the only queue type
supported right now.  By default no flush interval is configured. All events
published to this queue will be directly consumed by the outputs.
The output’s <code class="literal">bulk_max_size</code> setting limits the number of events being processed at once.</p><p>The memory queue waits for the output to acknowledge or drop events. If
the queue is full, no new events can be inserted into the memeory queue. Only
after the signal from the output will the queue free up space for more events to be accepted.</p><p>To enforce spooling in the queue, set the <code class="literal">flush.min_events</code> and <code class="literal">flush.timeout</code> options.</p><p>This sample configuration forwards events to the output if 512 events are
available or the oldest available event is already waiting for 5s in the queue:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">queue.mem:
  events: 4096
  flush.min_events: 512
  flush.timeout: 5s</pre></div><h4><a id="_configuration_options_2"></a>Configuration options<a href="https://github.com/elastic/beats/edit/6.1/libbeat/docs/queueconfig.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>You can specify the following options in the <code class="literal">queue.mem</code> section of the <code class="literal">filebeat.yml</code> config file:</p><h5><a id="_literal_events_literal"></a><code class="literal">events</code><a href="https://github.com/elastic/beats/edit/6.1/libbeat/docs/queueconfig.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Number of events the queue can store.</p><p>The default value is 4096 events.</p><h5><a id="_literal_flush_min_events_literal"></a><code class="literal">flush.min_events</code><a href="https://github.com/elastic/beats/edit/6.1/libbeat/docs/queueconfig.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Minimum number of events required for publishing. If this value is set to 0, the
output can start publishing events without additional waiting times. Otherwise
the output has to wait for more events to become available.</p><p>The default value is 0.</p><h5><a id="_literal_flush_timeout_literal"></a><code class="literal">flush.timeout</code><a href="https://github.com/elastic/beats/edit/6.1/libbeat/docs/queueconfig.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Maximum wait time for <code class="literal">flush.min_events</code> to be fulfilled. If set to 0s, events
will be immediately available for consumption.</p><p>The default values is 0s.</p></div><div class="navfooter"><span class="prev"><a href="_live_reloading.html">
              « 
              Live reloading</a>
           
        </span><span class="next">
           
          <a href="configuring-output.html">Configure the output
               »
            </a></span></div></body></html>
