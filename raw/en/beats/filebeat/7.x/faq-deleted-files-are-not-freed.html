<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Filebeat keeps open file handlers of deleted files for a long time
        | Filebeat Reference [7.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Filebeat Reference [7.x]" /><link rel="up" href="faq.html" title="Common problems" /><link rel="prev" href="newline-character-required-eof.html" title="Filebeat isn’t shipping the last line of a file" /><link rel="next" href="bandwidth-throttling.html" title="Filebeat uses too much bandwidth" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Filebeat/Reference/7.x" /><meta name="DC.subject" content="Filebeat" /><meta name="DC.identifier" content="7.x" /></head><body><div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Filebeat Reference
      [7.x]
    </a></span> » <span class="breadcrumb-link"><a href="troubleshooting.html">Troubleshooting</a></span> » <span class="breadcrumb-link"><a href="faq.html">Common problems</a></span> » <span class="breadcrumb-node">Filebeat keeps open file handlers of deleted files for a long time</span></div><div class="navheader"><span class="prev"><a href="newline-character-required-eof.html">
              « 
              Filebeat isn’t shipping the last line of a file</a>
           
        </span><span class="next">
           
          <a href="bandwidth-throttling.html">Filebeat uses too much bandwidth
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="faq-deleted-files-are-not-freed"></a>Filebeat keeps open file handlers of deleted files for a long time<a href="https://github.com/elastic/beats/edit/7.x/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>In the default behaviour, Filebeat opens the files and keeps them open until it
reaches the end of them.  In situations when the configured output is blocked
(e.g. Elasticsearch or Logstash is unavailable) for a long time, this can cause
Filebeat to keep file handlers to files that were deleted from the file system
in the mean time. As long as Filebeat keeps the deleted files open, the
operating system doesn’t free up the space on disk, which can lead to increase
disk utilisation or even out of disk situations.</p><p>To mitigate this issue, you can set the
<a class="xref" href="filebeat-input-log.html#filebeat-input-log-close-timeout" title="close_timeout"><code class="literal">close_timeout</code></a> setting to <code class="literal">5m</code>. This will ensure
every file handler is closed once every 5 minutes, regardless of whether it
reached EOF or not. Note that this option can lead to data loss if the file is
deleted before Filebeat reaches the end of the file.</p></div><div class="navfooter"><span class="prev"><a href="newline-character-required-eof.html">
              « 
              Filebeat isn’t shipping the last line of a file</a>
           
        </span><span class="next">
           
          <a href="bandwidth-throttling.html">Filebeat uses too much bandwidth
               »
            </a></span></div></body></html>
