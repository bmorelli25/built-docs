<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Securing Communication With Elasticsearch
        | Winlogbeat Reference [1.2]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Winlogbeat Reference [1.2]" /><link rel="up" href="securing-winlogbeat.html" title="Securing Winlogbeat" /><link rel="prev" href="securing-winlogbeat.html" title="Securing Winlogbeat" /><link rel="next" href="configuring-tls-logstash.html" title="Securing Communication With Logstash by Using TLS" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Winlogbeat/Reference/1.2" /><meta name="DC.subject" content="Winlogbeat" /><meta name="DC.identifier" content="1.2" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Winlogbeat Reference
      [1.2]
    </a></span> » <span class="breadcrumb-link"><a href="securing-winlogbeat.html">Securing Winlogbeat</a></span> » <span class="breadcrumb-node">Securing Communication With Elasticsearch</span></div><div class="navheader"><span class="prev"><a href="securing-winlogbeat.html">
              « 
              Securing Winlogbeat</a>
           
        </span><span class="next">
           
          <a href="configuring-tls-logstash.html">Securing Communication With Logstash by Using TLS
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="securing-communication-elasticsearch"></a>Securing Communication With Elasticsearch<a href="https://github.com/elastic/beats/edit/1.2/libbeat/docs/https.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>To secure the communication between Winlogbeat and Elasticsearch, you can use HTTPS
and basic authentication. Here is a sample configuration:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">elasticsearch:
  username: winlogbeat <a id="CO1-1"></a><i class="conum" data-value="1"></i>
  password: verysecret <a id="CO1-2"></a><i class="conum" data-value="2"></i>
  protocol: https <a id="CO1-3"></a><i class="conum" data-value="3"></i>
  hosts: ["elasticsearch.example.com:9200"] <a id="CO1-4"></a><i class="conum" data-value="4"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The username to use for authenticating to Elasticsearch.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
The password to use for authenticating to Elasticsearch.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
This setting enables the HTTPS protocol.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-4"><i class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>
The IP and port of the Elasticsearch nodes.
</p></td></tr></table></div><p>Elasticsearch doesn’t have built-in basic authentication, but you can achieve it
either by using a web proxy or by using the
<a class="ulink" href="https://www.elastic.co/products/shield" target="_top">Shield</a> commercial plugin.</p><p>Winlogbeat verifies the validity of the server certificates and only accepts trusted
certificates. Creating a correct SSL/TLS infrastructure is outside the scope of
this document, but a good guide to follow is the
<a class="ulink" href="https://www.elastic.co/guide/en/shield/current/certificate-authority.html" target="_top">Setting Up a Certificate Authority</a>
appendix from the Shield guide.</p><p>By default Winlogbeat uses the list of trusted certificate authorities from the
operating system where Winlogbeat is running. You can configure Winlogbeat to use a specific list of
CA certificates instead of the list from the OS. You can also configure it to use client authentication
by specifying the certificate and key to use when the server requires the Beat to authenticate. Here is an example
configuration:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">elasticsearch:
  username: winlogbeat
  password: verysecret
  protocol: https
  hosts: ["elasticsearch.example.com:9200"]
  tls:
    certificate_authorities: <a id="CO2-1"></a><i class="conum" data-value="1"></i>
      - /etc/pki/my_root_ca.pem
      - /etc/pki/my_other_ca.pem
    certificate: "/etc/pki/client.pem" <a id="CO2-2"></a><i class="conum" data-value="2"></i>
    certificate_key: "/etc/pki/key.pem" <a id="CO2-3"></a><i class="conum" data-value="3"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The list of CA certificates to trust
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
The path to the certificate for TLS client authentication
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
The client certificate key
</p></td></tr></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>For any given connection, the SSL/TLS certificates must have a subject
that matches the value specified for <code class="literal">hosts</code>, or the TLS handshake fails.
For example, if you specify <code class="literal">hosts: ["foobar:9200"]</code>, the certificate MUST
include <code class="literal">foobar</code> in the subject (<code class="literal">CN=foobar</code>) or as a subject alternative name
(SAN). Make sure the hostname resolves to the correct IP address. If no DNS is available, then
you can associate the IP address with your hostname in <code class="literal">/etc/hosts</code>
(on Unix) or <code class="literal">C:\Windows\System32\drivers\etc\hosts</code> (on Windows).</p></div></div></div><div class="navfooter"><span class="prev"><a href="securing-winlogbeat.html">
              « 
              Securing Winlogbeat</a>
           
        </span><span class="next">
           
          <a href="configuring-tls-logstash.html">Securing Communication With Logstash by Using TLS
               »
            </a></span></div></body></html>
