<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Data Streams | Elasticsearch Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [master]"/>
<link rel="up" href="index.html" title="Elasticsearch Reference [master]"/>
<link rel="prev" href="slm-retention.html" title="Snapshot retention"/>
<link rel="next" href="secure-cluster.html" title="Secure a cluster"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [master]</a></span>
»
<span class="breadcrumb-node">Data Streams</span>
</div>
<div class="navheader">
<span class="prev">
<a href="slm-retention.html">« Snapshot retention</a>
</span>
<span class="next">
<a href="secure-cluster.html">Secure a cluster »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="data-streams"></a>Data Streams<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams.asciidoc">edit</a></h1>
</div></div></div>
<p>You can use data streams to index time-based data that&#8217;s continuously generated.
A data stream groups indices from the same time-based data source.
A data stream tracks its indices, known as <em>backing indices</em>, using an ordered
list.</p>
<p>A data stream&#8217;s backing indices are <a class="xref" href="index-modules.html#index-hidden">hidden</a>.
While all backing indices handle read requests, the most recently created
backing index is the data stream&#8217;s only write index.  A data stream only
accepts <a class="xref" href="docs-index_.html" title="Index API">index requests</a> with <code class="literal">op_type</code> set to <code class="literal">create</code>. To update
or delete specific documents in a data stream, submit a <a class="xref" href="docs-delete.html" title="Delete API">delete</a>
or <a class="xref" href="docs-update.html" title="Update API">update</a> API request to the backing index containing the
document.</p>
<p>To create a data stream, set up a <a class="xref" href="indices-templates.html" title="Index templates">composable index
template</a> containing:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
A name or wildcard pattern for the data stream in the <code class="literal">index_patterns</code> property.
</li>
<li class="listitem">
A <code class="literal">data_stream</code> definition that contains the <code class="literal">timestamp_field</code> property.
The <code class="literal">timestamp_field</code> must be the primary timestamp field
 for the data source. This field must be included in every
 document indexed to the data stream.
</li>
</ul>
</div>
<p>When you index one or more documents to a not-yet-existent target matching
the template&#8217;s name or pattern, Elasticsearch automatically creates the corresponding
data stream. You can also manually create a data stream using the
<a class="xref" href="indices-create-data-stream.html" title="Create data stream API">create data stream API</a>. However, a composable
template for the stream is still required.</p>
<p>You can use the <a class="xref" href="indices-rollover-index.html" title="Rollover index API">rollover API</a> to roll a data stream
over to a new index when the current write index meets specified criteria, such
as a maximum age or size. A rollover creates a new backing index and updates the
data stream&#8217;s list of backing indices. This new index then becomes the stream&#8217;s
new write index. See <a class="xref" href="indices-rollover-index.html#rollover-data-stream-ex" title="Roll over a data stream">Roll over a data stream</a>.</p>
<p>Backing indices are generated with the naming convention
<code class="literal">.ds-&lt;data-stream-name&gt;-zzzzzz</code>, where <code class="literal">zzzzzz</code> is the six-digit, zero-padded
generation of the data stream. For example, a data stream named
<code class="literal">web-server-logs</code> with a generation of 34 would have a write index named
<code class="literal">.ds-web-server-logs-000034</code>. Data streams may have backing indices that do not
conform to this naming convention if operations such as
<a class="xref" href="indices-shrink-index.html" title="Shrink index API">shrink</a> have been performed on them.</p>
<h2><a id="create-data-stream"></a>Create a data stream<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams.asciidoc">edit</a></h2>
<p>Create a composable template with a <code class="literal">data_stream</code> definition:</p>
<a id="22ac136a1be7538cf870dcba7ac2c4b1"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_index_template/logs_template
{
  "index_patterns": ["logs-*"],
  "data_stream": {
    "timestamp_field": "@timestamp"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1194.console"></div>
<p>Start indexing data to a target matching the composable template&#8217;s wildcard
pattern:</p>
<a id="d3f4ef70713abf17ffd8349e88a983df"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /logs-foobar/_doc
{
  "@timestamp": "2050-11-15T14:12:12",
  ...
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1195.console"></div>
<p>Response:</p>
<a id="f194e9c6ddd41c6cab8e6000196b0642"></a>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
    "_shards" : {
        "total" : 2,
        "failed" : 0,
        "successful" : 1
    },
    "_index" : ".ds-logs-foobar-000001",
    "_id" : "W0tpsmIBdwcYyG50zbta",
    "_version" : 1,
    "_seq_no" : 0,
    "_primary_term" : 1,
    "result": "created"
}</pre>
</div>
<p>Or create a data stream using the create data stream API:</p>
<a id="96a5346ee138fde1c376ab00edacd159"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_data_stream/logs-barbaz</pre>
</div>
<div class="console_widget" data-snippet="snippets/1196.console"></div>
<h2><a id="data-streams-apis"></a>Data stream APIs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams.asciidoc">edit</a></h2>
<p>The following APIs are available for managing data streams:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
To get information about data streams, use the <a class="xref" href="indices-get-data-stream.html" title="Get data stream API">get data stream API</a>.
</li>
<li class="listitem">
To delete data streams, use the <a class="xref" href="indices-delete-data-stream.html" title="Delete data stream API">delete data stream API</a>.
</li>
<li class="listitem">
To manually create a data stream, use the <a class="xref" href="indices-create-data-stream.html" title="Create data stream API">create data stream API</a>.
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="slm-retention.html">« Snapshot retention</a>
</span>
<span class="next">
<a href="secure-cluster.html">Secure a cluster »</a>
</span>
</div>
</div>
</body>
</html>
