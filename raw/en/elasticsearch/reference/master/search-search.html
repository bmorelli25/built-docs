<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Search
        | Elasticsearch Reference [master]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [master]" /><link rel="up" href="search.html" title="Search APIs" /><link rel="prev" href="search.html" title="Search APIs" /><link rel="next" href="search-uri-request.html" title="URI Search" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="master" /></head><body><div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span> » <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span> » <span class="breadcrumb-node">Search</span></div><div class="navheader"><span class="prev"><a href="search.html">
              « 
              Search APIs</a>
           
        </span><span class="next">
           
          <a href="search-uri-request.html">URI Search
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-search"></a>Search<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Returns search hits that match the query defined in the request.</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /twitter/_search?q=user:kimchy</pre></div><div class="console_widget" data-snippet="snippets/1547.console"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-search-api-request"></a>Request<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><code class="literal">GET /&lt;index&gt;/_search</code></p><p><code class="literal">GET /all/_search</code></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-search-api-desc"></a>Description<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Allows you to execute a search query and get back search hits that match the
query. The query can either be provided using a simple
<a class="link" href="search-uri-request.html" title="URI Search">query string as a parameter</a>, or using a
<a class="link" href="search-request-body.html" title="Request Body Search">request body</a>.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="search-partial-responses"></a>Partial responses<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>To ensure fast responses, the search API will respond with partial results if
one or more shards fail. See <a class="link" href="docs-replication.html#shard-failures" title="Shard failures">Shard failures</a> for more
information.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-search-api-path-params"></a>Path parameters<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">&lt;index&gt;</code></span></dt><dd>(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-search-api-query-params"></a>Query parameters<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">allow_no_indices</code></span></dt><dd><p class="simpara">(Optional, boolean) If <code class="literal">true</code>,
the request does <span class="strong strong"><strong>not</strong></span> return an error
if a wildcard expression
or <code class="literal">_all</code> value retrieves only missing or closed indices.</p><p class="simpara">This parameter also applies to <a class="link" href="indices-aliases.html" title="Update index alias API">index aliases</a>
that point to a missing or closed index.</p></dd><dt><span class="term"><code class="literal">allow_partial_search_results</code></span></dt><dd>(Optional, boolean) Indicates if an error should be returned if there is a
partial search failure or timeout. Defaults to <code class="literal">true</code>.</dd><dt><span class="term"><code class="literal">analyzer</code></span></dt><dd>(Optional, string) Defines the analyzer to use for the query string.</dd><dt><span class="term"><code class="literal">analyze_wildcard</code></span></dt><dd>(Optional, boolean) If <code class="literal">true</code>, wildcard and prefix queries will also be
analyzed. Defaults to <code class="literal">false</code>.</dd><dt><span class="term"><code class="literal">batched_reduce_size</code></span></dt><dd>(Optional, integer) The number of shard results that should be reduced at once
on the coordinating node. This value should be used as a protection mechanism
to reduce the memory overhead per search request if the potential number of
shards in the request can be large. Defaults to <code class="literal">512</code>.</dd><dt><span class="term"><code class="literal">ccs_minimize_roundtrips</code></span></dt><dd>(Optional, boolean) Indicates whether network round-trips should be minimized
as part of cross-cluster search requests execution. Defaults to <code class="literal">true</code>.</dd><dt><span class="term"><code class="literal">default_operator</code></span></dt><dd>(Optional, string) The default operator for query string query (AND or OR).
Defaults to <code class="literal">OR</code>.</dd><dt><span class="term"><code class="literal">df</code></span></dt><dd>(Optional, string) Defines the field to use as default where no field prefix
is given in the query string.</dd><dt><span class="term"><code class="literal">docvalue_fields</code></span></dt><dd>(Optional, string) A comma-separated list of fields to return as the docvalue
representation of a field for each hit.</dd><dt><span class="term"><code class="literal">expand_wildcards</code></span></dt><dd><p class="simpara">(Optional, string) Controls what kind of indices that wildcard
expressions can expand to. Valid values are:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">all</code></span></dt><dd>Expand to open and closed indices.</dd><dt><span class="term"><code class="literal">open</code></span></dt><dd>Expand only to open indices.</dd><dt><span class="term"><code class="literal">closed</code></span></dt><dd>Expand only to closed indices.</dd><dt><span class="term"><code class="literal">none</code></span></dt><dd>Wildcard expressions are not accepted.</dd></dl></div><p class="simpara">Defaults to <code class="literal">open</code>.</p></dd><dt><span class="term"><code class="literal">explain</code></span></dt><dd>(Optional, boolean) If <code class="literal">true</code>, returns detailed information about score
computation as part of a hit. Defaults to <code class="literal">false</code>.</dd><dt><span class="term"><code class="literal">from</code></span></dt><dd>(Optional, integer) Defines the starting offset. Defaults to <code class="literal">0</code>.</dd><dt><span class="term"><code class="literal">ignore_throttled</code></span></dt><dd>(Optional, boolean) If <code class="literal">true</code>, concrete, expanded or aliased indices will be
ignored when throttled. Defaults to <code class="literal">false</code>.</dd><dt><span class="term"><code class="literal">ignore_unavailable</code></span></dt><dd>(Optional, boolean) If <code class="literal">true</code>, missing or closed indices are not included in the
response. Defaults to <code class="literal">false</code>.</dd><dt><span class="term"><code class="literal">lenient</code></span></dt><dd>(Optional, boolean) If <code class="literal">true</code>, format-based query failures (such as
providing text to a numeric field) will be ignored. Defaults to <code class="literal">false</code>.</dd><dt><span class="term"><code class="literal">max_concurrent_shard_requests</code></span></dt><dd>(Optional, integer) Defines the number of concurrent shard requests per node
this search executes concurrently. This value should be used to limit the
impact of the search on the cluster in order to limit the number of concurrent
shard requests. Defaults to <code class="literal">5</code>.</dd><dt><span class="term"><code class="literal">pre_filter_shard_size</code></span></dt><dd>(Optional, integer) Defines a threshold that enforces a pre-filter roundtrip
to prefilter search shards based on query rewriting if the number of shards
the search request expands to exceeds the threshold. This filter roundtrip can
limit the number of shards significantly if for instance a shard can not match
any documents based on it’s rewrite method ie. if date filters are mandatory
to match but the shard bounds and the query are disjoint. Defaults to <code class="literal">128</code>.</dd><dt><span class="term"><code class="literal">preference</code></span></dt><dd>(Optional, string) Specifies the node or shard the operation should be
performed on. Random by default.</dd><dt><span class="term"><code class="literal">q</code></span></dt><dd>(Optional, string) Query in the Lucene query string syntax.</dd><dt><span class="term"><code class="literal">request_cache</code></span></dt><dd>(Optional, boolean) If <code class="literal">true</code>, request cache will be used for this request.
Defaults to index level settings.</dd><dt><span class="term"><code class="literal">rest_total_hits_as_int</code></span></dt><dd>(Optional, boolean) Indicates whether hits.total should be rendered as an
integer or an object in the rest search response. Defaults to <code class="literal">false</code>.</dd><dt><span class="term"><code class="literal">routing</code></span></dt><dd>(Optional, <a class="link" href="common-options.html#time-units" title="Time units">time units</a>) Specifies how long a consistent view of
the index should be maintained for scrolled search.</dd><dt><span class="term"><code class="literal">search_type</code></span></dt><dd><p class="simpara">(Optional, string) Defines the type of the search operation. Available
options:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">query_then_fetch</code></li><li class="listitem"><code class="literal">dfs_query_then_fetch</code></li></ul></div></dd><dt><span class="term"><code class="literal">seq_no_primary_term</code></span></dt><dd>(Optional, boolean) If <code class="literal">true</code>, returns sequence number and primary term of the
last modification of each hit.</dd><dt><span class="term"><code class="literal">size</code></span></dt><dd>(Optional, integer) Defines the number of hits to return. Defaults to <code class="literal">10</code>.</dd><dt><span class="term"><code class="literal">sort</code></span></dt><dd>(Optional, string) A comma-separated list of &lt;field&gt;:&lt;direction&gt; pairs.</dd><dt><span class="term"><code class="literal">_source</code></span></dt><dd>(Optional, string) True or false to return the <code class="literal">_source</code> field or not, or a
list of fields to return.</dd><dt><span class="term"><code class="literal">_source_excludes</code></span></dt><dd>(Optional, string) A list of fields to exclude from the returned <code class="literal">_source</code>
field.</dd><dt><span class="term"><code class="literal">_source_includes</code></span></dt><dd>(Optional, string) A list of fields to extract and return from the <code class="literal">_source</code>
field.</dd><dt><span class="term"><code class="literal">stats</code></span></dt><dd>(Optional, string) Specific <code class="literal">tag</code> of the request for logging and statistical
purposes.</dd><dt><span class="term"><code class="literal">stored_fields</code></span></dt><dd>(Optional, string) A comma-separated list of stored fields to return as part
of a hit.</dd><dt><span class="term"><code class="literal">suggest_field</code></span></dt><dd>(Optional, string) Specifies which field to use for suggestions.</dd><dt><span class="term"><code class="literal">suggest_mode</code></span></dt><dd><p class="simpara">(Optional, string) Specifies suggest mode. Defaults to <code class="literal">missing</code>. Available
options:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">always</code></li><li class="listitem"><code class="literal">missing</code></li><li class="listitem"><code class="literal">popular</code></li></ul></div></dd><dt><span class="term"><code class="literal">suggest_size</code></span></dt><dd>(Optional, integer) Defines how many suggestions to return in response.</dd><dt><span class="term"><code class="literal">suggest_text</code></span></dt><dd>(Optional, string) The source text for which the suggestions should be
returned.</dd><dt><span class="term"><code class="literal">terminate_after</code></span></dt><dd>(Optional, integer) The maximum number of documents to collect for each shard,
upon reaching which the query execution will terminate early.</dd><dt><span class="term"><code class="literal">timeout</code></span></dt><dd>(Optional, <a class="link" href="common-options.html#time-units" title="Time units">time units</a>) Specifies the period of time to wait for
a response. If no response is received before the timeout expires, the request
fails and returns an error. Defaults to <code class="literal">30s</code>.</dd><dt><span class="term"><code class="literal">track_scores</code></span></dt><dd>(Optional, boolean) If <code class="literal">true</code>, then calculates and returns scores even if they
are not used for sorting.</dd><dt><span class="term"><code class="literal">track_total_hits</code></span></dt><dd>(Optional, boolean) Indicates if the number of documents that match the query
should be tracked.</dd><dt><span class="term"><code class="literal">typed_keys</code></span></dt><dd>(Optional, boolean) Specifies whether aggregation and suggester names should
be prefixed by their respective types in the response.</dd><dt><span class="term"><code class="literal">version</code></span></dt><dd>(Optional, boolean) If <code class="literal">true</code>, returns document version as part of a hit.</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-search-api-request-body"></a>Request body<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">query</code></span></dt><dd>(Optional, <a class="link" href="query-dsl.html" title="Query DSL">query object</a>) Defines the search definition using the
<a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a>.</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-search-api-example"></a>Examples<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><h5><a id="search-multi-index"></a>Multi-Index<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>All search APIs can be applied across multiple indices with support for
the <a class="link" href="multi-index.html" title="Multiple Indices">multi index syntax</a>. For
example, we can search on all documents within the twitter index:</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /twitter/_search?q=user:kimchy</pre></div><div class="console_widget" data-snippet="snippets/1548.console"></div><p>We can also search all documents with a certain tag across several indices
(for example, when there is one index per user):</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /kimchy,elasticsearch/_search?q=tag:wow</pre></div><div class="console_widget" data-snippet="snippets/1549.console"></div><p>Or we can search across all available indices using <code class="literal">_all</code>:</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /_all/_search?q=tag:wow</pre></div><div class="console_widget" data-snippet="snippets/1550.console"></div></div></div><div class="navfooter"><span class="prev"><a href="search.html">
              « 
              Search APIs</a>
           
        </span><span class="next">
           
          <a href="search-uri-request.html">URI Search
               »
            </a></span></div></body></html>
