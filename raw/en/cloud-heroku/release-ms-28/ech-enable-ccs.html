<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Enable cross-cluster search
        | Elasticsearch Add-On for Heroku Documentation
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Add-On for Heroku Documentation" /><link rel="up" href="ech-configure.html" title="Configuring your deployment" /><link rel="prev" href="ech-watcher.html" title="Enable Alerting (Watcher)" /><link rel="next" href="ech-upgrade-deployment.html" title="Upgrade versions" /><meta name="DC.type" content="Learn/Docs/Cloud-Heroku/Reference" /><meta name="DC.subject" content="Elasticsearch Add-On for Heroku" /><meta name="DC.identifier" content="release-ms-28" /><meta name="robots" content="noindex,nofollow" /></head><body><div class="page_header">The documentation you are looking at is in the process of being revised.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Add-On for Heroku Documentation</a></span> » <span class="breadcrumb-link"><a href="ech-configure.html">Configuring your deployment</a></span> » <span class="breadcrumb-node">Enable cross-cluster search</span></div><div class="navheader"><span class="prev"><a href="ech-watcher.html">
              « 
              Enable Alerting (Watcher)</a>
           
        </span><span class="next">
           
          <a href="ech-upgrade-deployment.html">Upgrade versions
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="ech-enable-ccs"></a>Enable cross-cluster search</h2></div></div></div><p>Cross-cluster search (CCS) allows you to configure multiple remote deployments, and enable federated search queries across all of the configured deployments.</p><p>Cluster settings are automatically maintained and updated when cluster topologies change. For example, all connected clusters are updated when:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A cluster is deleted
</li><li class="listitem">
A node is added or removed from a cluster
</li></ul></div><p>Once your remotes are configured, you can <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.4/modules-cross-cluster-search.html" target="_top">run CCS queries from Elasticsearch</a>.</p><h3><a id="echbefore_you_begin_7"></a>Before you begin</h3><p>To enable CCS, you must meet the following criteria:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Review the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.4/modules-remote-clusters.html#gateway-nodes-selection" target="_top">Elasticsearch version compatibility</a> table.
</li><li class="listitem"><p class="simpara">
System deployments are not compatible with CCS.
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
To access the RESTful API for Elasticsearch Add-On for Heroku, you must use your Elasticsearch Add-On for Heroku credentials.
</li></ul></div></li></ul></div><h3><a id="ech-add-remotes"></a>Establish remote deployment relationships</h3><p>The CCS deployment acts as a hub that manages all of the remote deployment connections.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Log into the <a class="ulink" href="https://cloud.elastic.co/" target="_top">Elasticsearch Add-On for Heroku console</a>.
</li><li class="listitem">
Click <span class="strong strong"><strong>Create deployment</strong></span>.
</li><li class="listitem">
Select the <span class="strong strong"><strong>Cross Cluster Search</strong></span> template.
</li><li class="listitem"><p class="simpara">
Decide when to add the remote connections:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
If you know the deployments that you want to include, click <span class="strong strong"><strong>Customize deployment</strong></span> to define the remotes while creating the deployment.
</li><li class="listitem">
After the deployment is spun up, you can add remotes from the deployment overview page.
</li></ul></div></li><li class="listitem">
Click <span class="strong strong"><strong>Add deployment</strong></span>.
</li><li class="listitem"><p class="simpara">
Select a target deployment from the <span class="strong strong"><strong>Deployment name</strong></span> drop-down list.
</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Only the compatible deployments appear on this list.</p></div></div></li><li class="listitem">
Optional: Update the generated alias to something meaningful to you.
</li><li class="listitem">
Save your changes.
</li><li class="listitem">
Verify the configuration by running <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.4/modules-cross-cluster-search.html" target="_top">CCS queries from Elasticsearch</a>.
</li><li class="listitem">
As needed, from the Elasticsearch API or Kibana, update the <a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/7.4/cross-cluster-configuring.html" target="_top">Elasticsearch cluster security</a> and <a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/7.4/elasticsearch-security.html" target="_top">user access roles</a> to allow them to access the remote deployments.
</li></ol></div><p>The target deployment overview page shows which CCS deployments can search the target.</p></div><div class="navfooter"><span class="prev"><a href="ech-watcher.html">
              « 
              Enable Alerting (Watcher)</a>
           
        </span><span class="next">
           
          <a href="ech-upgrade-deployment.html">Upgrade versions
               »
            </a></span></div></body></html>
