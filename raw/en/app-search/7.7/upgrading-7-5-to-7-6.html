<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Upgrading 7.5 to 7.6 | Elastic App Search Documentation [7.7] | Elastic</title>
<link rel="home" href="index.html" title="Elastic App Search Documentation [7.7]"/>
<link rel="up" href="migrating-and-upgrading.html" title="Migrating &amp; Upgrading"/>
<link rel="prev" href="migrating-from-app-search-to-enterprise-search.html" title="Migrating from App Search to Enterprise Search"/>
<link rel="next" href="read-only-mode.html" title="Read-Only Mode"/>
<meta name="DC.type" content="Learn/Docs/App Search/Guide/7.7"/>
<meta name="DC.subject" content="App Search"/>
<meta name="DC.identifier" content="7.7"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic App Search Documentation [7.7]</a></span>
»
<span class="breadcrumb-link"><a href="migrating-and-upgrading.html">Migrating &amp; Upgrading</a></span>
»
<span class="breadcrumb-node">Upgrading 7.5 to 7.6</span>
</div>
<div class="navheader">
<span class="prev">
<a href="migrating-from-app-search-to-enterprise-search.html">« Migrating from App Search to Enterprise Search</a>
</span>
<span class="next">
<a href="read-only-mode.html">Read-Only Mode »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="upgrading-7-5-to-7-6"></a>Upgrading 7.5 to 7.6</h2>
</div></div></div>
<p><em>How do I upgrade App Search to 7.6 from 7.5 on Cloud or when Self-Managing?</em></p>
<p>App Search releases new features and fixes at a regular cadence. That means you&#8217;ll want to upgrade!</p>
<p>Keeping your deployment up to date gives you access to new features, security updates, and performance improvements.</p>
<p><span class="strong strong"><strong>This document focuses on the immediate upgrade from 7.5 to 7.6.</strong></span></p>
<p><em>For richer detail about the upgrade process, please read the <a class="xref" href="migrating-and-upgrading.html" title="Migrating &amp; Upgrading">Upgrade Guide</a>.</em></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="upgrading-7-5-to-7-6.html#app-search-upgrade-7-5-to-7-6-upgrade-7-5-to-7-6" title="Upgrading 7.5 to 7.6">Upgrading 7.5.x to 7.6.x</a>
</li>
<li class="listitem">
<a class="xref" href="upgrading-7-5-to-7-6.html#app-search-upgrade-7-5-to-7-6-upgrade-cloud" title="Upgrading on Elastic Cloud">Upgrading on Elastic Cloud</a>
</li>
<li class="listitem">
<a class="xref" href="upgrading-7-5-to-7-6.html#app-search-upgrade-7-5-to-7-6-troubleshooting" title="Troubleshooting">Troubleshooting</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="app-search-upgrade-7-5-to-7-6-upgrade-7-5-to-7-6"></a>Upgrading 7.5 to 7.6</h3>
</div></div></div>
<p>Before you begin it is helpful to do the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Test upgrades in a development environment before rolling them out to production.
</li>
<li class="listitem">
Stop writing to your Elasticsearch Cluster.
</li>
<li class="listitem">
Back-up your data with <a href="/guide/en/elasticsearch/reference/7.7/snapshot-restore.html" class="ulink" target="_top">Elasticsearch snapshots</a>. This is required for a rollback, if needed!
</li>
</ul>
</div>
<p>There are two recommended upgrade paths. Whichever you choose will depend on your requirements for App Search service availability, on the capabilities of the platform you are using to manage the deployment, on available resources, and so. See the details below to better understand pros and cons of each upgrade path.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<span class="strong strong"><strong><a class="xref" href="upgrading-7-5-to-7-6.html#app-search-upgrade-7-5-to-7-6-in-place-upgrade" title="In-place Upgrade">In-place Upgrade</a>:</strong></span> replace an App Search instance with a new set running a newer version. Requires operator to shut down, upgrade packages, start back up and let the instances migrate the data if needed. <span class="strong strong"><strong>Cause downtime and requires no client-side changes.</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><a class="xref" href="upgrading-7-5-to-7-6.html#app-search-upgrade-7-5-to-7-6-snapshot-upgrades" title="Snapshot-based Upgrade">Snapshot-based Upgrade</a>:</strong></span> create a <a href="/guide/en/elasticsearch/reference/7.7/snapshot-restore.html" class="ulink" target="_top">snapshot</a> of an Elasticsearch cluster used by App Search, restore the <a href="/guide/en/elasticsearch/reference/7.7/snapshot-restore.html" class="ulink" target="_top">snapshot</a> to a new Elasticsearch cluster, and then start App Search on the new cluster. <span class="strong strong"><strong>Does not cause downtime but requires client changes.</strong></span>
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="app-search-upgrade-7-5-to-7-6-in-place-upgrade"></a>In-place Upgrade</h3>
</div></div></div>
<p>If you are able to handle a downtime of the App Search service, then this is the most straight-forward upgrade path. We recommend this method to all customers who are able to schedule a maintenance window for their service or for non-mission-critical applications based on App Search.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="app-search-upgrade-7-5-to-7-6-advantages"></a>Advantages</h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<span class="strong strong"><strong>No need for new infrastructure</strong></span>&#8201;&#8212;&#8201;everything is done in-place and you do not need to provision any new instances of Elasticsearch or App Search.
</li>
<li class="listitem">
<span class="strong strong"><strong>No need to change client configurations</strong></span>&#8201;&#8212;&#8201;all of your API clients can use the same API endpoints before and after the upgrade since new App Search instances will simply replace the existing ones.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="app-search-upgrade-7-5-to-7-6-disadvantages"></a>Disadvantages</h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<span class="strong strong"><strong>Downtime required</strong></span>&#8201;&#8212;&#8201;you have to shut down all of your App Search instances to perform the upgrade and your service will not be available until the upgrade is complete. With proper planning, the downtime period can be reduced significantly, but downtime is still unavoidable.
</li>
<li class="listitem">
<span class="strong strong"><strong>Harder to roll back</strong></span>&#8201;&#8212;&#8201;if your upgrade fails for any reason, we do not recommend rolling back to the older version of App Search due to potential issues with the partially migrated dataset in Elasticsearch. You would have to restore from a backup to get back to your original state, which would prolong the downtime.
</li>
</ol>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="app-search-upgrade-7-5-to-7-6-steps"></a>Steps</h5>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Stop all of your App Search instances.
</li>
<li class="listitem">
Back up your data from Elasticsearch, using <a href="/guide/en/elasticsearch/reference/7.7/snapshot-restore.html" class="ulink" target="_top">snapshots</a>.
</li>
<li class="listitem">
Upgrade App Search packages on your servers or change your container image tags to point to the latest version if you use Docker or Kubernetes.
</li>
<li class="listitem">
Start up the new version of App Search and new instances will take care of coordinating. They will then perform the upgrade before starting up and accepting your API traffic.
</li>
</ol>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="app-search-upgrade-7-5-to-7-6-snapshot-upgrades"></a>Snapshot-based Upgrade</h3>
</div></div></div>
<p>For situations where App Search downtime is not acceptable or in cases where you want to ensure a rollback is possible&#8201;&#8212;&#8201;no matter what happens during an upgrade&#8201;&#8212;&#8201;the safest way to perform the upgrade is through snapshot-based cloning of a deployment. The snapshot-based process is more involved, but it does guarantee data consistency and allows you to perform a migration without a downtime of the Search API</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="app-search-upgrade-7-5-to-7-6-app-search-upgrade-7-5-to-7-6-advantages-2"></a>Advantages</h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>No Search API downtime required</strong></span>&#8201;&#8212;&#8201;both the old App Search deployment and the new one are able to handle search traffic throughout the upgrade process, meaning your clients should not notice the migration at all.
</li>
<li class="listitem">
<span class="strong strong"><strong>Easy to rollback</strong></span>&#8201;&#8212;&#8201;if you notice any issues with the new deployment (B) of App Search, you can retry the migration as many times as you need to, since your original deployment is still functional.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="app-search-upgrade-7-5-to-7-6-app-search-upgrade-7-5-to-7-6-disadvantages-2"></a>Disadvantages</h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Requires additional infrastructure</strong></span>&#8201;&#8212;&#8201;you need to provision a new Elasticsearch cluster and deploy a set of new App Search instances during the upgrade. This requires some coordination and additional compute resources during the upgrade process.
</li>
<li class="listitem">
<span class="strong strong"><strong>The need to change the client configuration</strong></span>&#8201;&#8212;&#8201;your API clients need to be switched to the new deployment endpoint after you perform the upgrade. <em>Please note: You could proxy your traffic through a load-balancer (ELB, ALB, etc) or a CDN to keep your API endpoint stable while you replace the App Search cluster behind the proxy.</em>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="app-search-upgrade-7-5-to-7-6-app-search-upgrade-7-5-to-7-6-steps-2"></a>Steps</h5>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<span class="strong strong"><strong>Stop writes into your App Search deployment (A)</strong></span>&#8201;&#8212;&#8201;you can do this manually by disabling your indexing jobs and so on&#8201;&#8212;&#8201;or use the Elasticsearch API to put a write lock on all App Search indexes.
</li>
<li class="listitem">
Create a backup of your Elasticsearch cluster (A) using snapshots.
</li>
<li class="listitem">
Create a new Elasticsearch cluster (B) and restore data from the latest snapshot.
</li>
<li class="listitem">
Deploy a new set of App Search instances (B) using the the new Elasticsearch cluster (B) as the data store.
</li>
<li class="listitem">
At this point you should have two separate App Search deployments both serving the same data. You should spot-check to make sure the new deployment (B) looks correct to you.
</li>
<li class="listitem">
Switch API traffic from the original App Search deployment (A) to the new one (B).
</li>
<li class="listitem">
Shut down the old App Search and Elasticsearch clusters.
</li>
</ol>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="app-search-upgrade-7-5-to-7-6-upgrade-cloud"></a>Upgrading on Elastic Cloud</h3>
</div></div></div>
<p>When deploying App Search on Elastic Cloud, you have access to two separate upgrade paths depending on your tolerance for App Search downtime:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
The default upgrade path&#8201;&#8212;&#8201;via the Cloud Console&#8201;&#8212;&#8201;is performed in-place via a full cluster restart, meaning App Search will be unavailable for the duration of the upgrade. In future versions of App Search, this mode will allow for in-place upgrades via read-only mode, but as of 7.6.0 downtime is required.
</li>
<li class="listitem">
If downtime is unacceptable for your use case, we recommend the <span class="strong strong"><strong><a class="xref" href="upgrading-7-5-to-7-6.html#app-search-upgrade-7-5-to-7-6-snapshot-upgrades" title="Snapshot-based Upgrade">Snapshot-based Upgrade</a></strong></span> process, that involves taking a snapshot of your deployment and then creating a new App Search deployment from the <a href="/guide/en/elasticsearch/reference/7.7/snapshot-restore.html" class="ulink" target="_top">snapshot</a> using a newer App Search version. <em>Please note: The snapshot-based upgrade process requires client-side changes to switch users to another deployment, but guarantees availability of the service during the upgrade process. If you want to keep your client configuration stable, you can proxy your API traffic through a load balancer&#8201;&#8212;&#8201;ELB, ALB, or simialr&#8201;&#8212;&#8201;or a CDN endpoint.</em>
</li>
</ol>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are using Elastic Cloud or ECE versions 2.4.0 to 2.4.4, there is a known problem with App Search upgrades from versions 7.5 to 7.6&#8201;&#8212;&#8201;<span class="strong strong"><strong>rolling upgrades could lead to limited data loss if you are actively modifying new engines during the upgrade process</strong></span>. As a workaround, before upgrading the 7.5 App Search instances to 7.6, you can stop the traffic towards those instances by clicking the <em>Stop routing</em> button in the UI. Once all 7.5 instances are no longer routing traffic, it is safe to perform the upgrade by clicking the <em>Upgrade</em> button.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="app-search-upgrade-7-5-to-7-6-troubleshooting"></a>Troubleshooting</h3>
</div></div></div>
<p>As with any software upgrades, there is always a chance that things will not go according to plan. This means you need to plan and prepare for the possibility of your App Search upgrade failing. You can review the comparison of different upgrade methods above and ensure you are comfortable with the risks associated with your preferred upgrade method before starting the upgrade process.</p>
<p>If you experience an upgrade failure, the information below should help you identify the causes of the issue and allow you to retry the upgrade if needed. App Search should be able to recover from many potential failures, meaning you should be able to retry an upgrade if it fails.</p>
<p>If your App Search upgrade fails, please do the following:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Check the App Search application logs of the new deployment&#8201;&#8212;&#8201;<code class="literal">log/app-search.log</code> or <code class="literal">/var/log/app-search/app-search.log</code>&#8201;&#8212;&#8201;to see the details of what happened.
</li>
<li class="listitem">
If the upgrade failed due to an issue with Elasticsearch that you can fix, do that and then re-attempt the upgrade by starting a new App Search instance again.
</li>
<li class="listitem">
If the process consistently fails, rollback using a method specific to your preferred upgrade path.
</li>
<li class="listitem">
Capture the <code class="literal">app-search.log file</code> and file a support case with Elastic if you need further help troubleshooting the upgrade process.
</li>
</ol>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="migrating-from-app-search-to-enterprise-search.html">« Migrating from App Search to Enterprise Search</a>
</span>
<span class="next">
<a href="read-only-mode.html">Read-Only Mode »</a>
</span>
</div>
</div>
</body>
</html>
