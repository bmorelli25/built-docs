<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Interfaces
        | Packetbeat Reference [1.2]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Packetbeat Reference [1.2]" /><link rel="up" href="packetbeat-configuration.html" title="Configuration Options" /><link rel="prev" href="packetbeat-configuration.html" title="Configuration Options" /><link rel="next" href="configuration-protocols.html" title="Protocols" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Packetbeat/Reference/1.2" /><meta name="DC.subject" content="Packetbeat" /><meta name="DC.identifier" content="1.2" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Packetbeat Reference
      [1.2]
    </a></span> » <span class="breadcrumb-link"><a href="reference.html">Reference</a></span> » <span class="breadcrumb-link"><a href="packetbeat-configuration.html">Configuration Options</a></span> » <span class="breadcrumb-node">Interfaces</span></div><div class="navheader"><span class="prev"><a href="packetbeat-configuration.html">
              « 
              Configuration Options</a>
           
        </span><span class="next">
           
          <a href="configuration-protocols.html">Protocols
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-interfaces"></a>Interfaces<a href="https://github.com/elastic/beats/edit/1.2/packetbeat/docs/reference/configuration/packetbeat-options.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The <code class="literal">interfaces</code> section configures the sniffer. Here is an example configuration:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml"># Select the network interfaces to sniff the data. You can use the "any"
# keyword to sniff on all connected interfaces.
interfaces:
  # On which device to sniff
  device: any

  # The maximum capture size of a single packet.
  snaplen: 1514

  # The type of the sniffer to use
  type: af_packet

  # The size of the sniffing buffer
  buffer_size_mb: 100</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_sniffing_options"></a>Sniffing Options<a href="https://github.com/elastic/beats/edit/1.2/packetbeat/docs/reference/configuration/packetbeat-options.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>You can specify the following options in the <code class="literal">interfaces</code> section:</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_device"></a>device<a href="https://github.com/elastic/beats/edit/1.2/packetbeat/docs/reference/configuration/packetbeat-options.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The network device to capture traffic from. The specified device is set automatically to promiscuous mode,
meaning that Packetbeat can capture traffic from other hosts on the same LAN.</p><p>Example:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: eth0</pre></div><p>On Linux, you can specify <code class="literal">any</code> for the device, and Packetbeat captures all
messages sent or received by the server where Packetbeat is installed.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>When you specify <code class="literal">any</code> for the device, the interfaces are not set
      to promiscuous mode.</p></div></div><p>The <code class="literal">device</code> option also accepts specifying the device by its index in the list of
devices available for sniffing. To obtain the list of available devices,
run Packetbeat with the following command:</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">packetbeat -devices</pre></div><p>This command returns a list that looks something like the following:</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">0: en0 (No description available)
1: awdl0 (No description available)
2: bridge0 (No description available)
3: fw0 (No description available)
4: en1 (No description available)
5: en2 (No description available)
6: p2p0 (No description available)
7: en4 (No description available)
8: lo0 (No description available)</pre></div><p>The following example sets up sniffing on the
first interface in the list:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: 0</pre></div><p>Specifying the index is especially useful on Windows where device names can be long.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_snaplen"></a>snaplen<a href="https://github.com/elastic/beats/edit/1.2/packetbeat/docs/reference/configuration/packetbeat-options.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The maximum size of the packets to capture. The
default is 65535, which is large enough for almost all networks and interface
types. If you sniff on a physical network interface, the optimal setting is
the MTU size. On virtual interfaces, however, it’s safer to accept the default value.</p><p>Example:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: eth0
  snaplen: 1514</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_type"></a>type<a href="https://github.com/elastic/beats/edit/1.2/packetbeat/docs/reference/configuration/packetbeat-options.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Packetbeat supports three sniffer types:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">pcap</code>, which uses the libpcap library and works on most platforms, but
   it’s not the fastest option.
</li><li class="listitem">
<code class="literal">af_packet</code>, which uses memory-mapped sniffing. This option is faster than libpcap
   and doesn’t require a kernel module, but it’s Linux-specific.
</li><li class="listitem">
<code class="literal">pf_ring</code>, which makes use of an ntop.org
   <a class="ulink" href="http://www.ntop.org/products/pf_ring/" target="_top">project</a>. This setting provides the best
   sniffing speed, but it requires a kernel module, and it’s Linux-specific.
</li></ul></div><p>The default sniffer type is <code class="literal">pcap</code>.</p><p>Here is an example configuration that specifies
the <code class="literal">af_packet</code> sniffing type:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: eth0
  type: af_packet</pre></div><p>On Linux, if you are trying to optimize the CPU usage of Packetbeat,
we recommend trying the <code class="literal">af_packet</code> and <code class="literal">pf_ring</code> options. Read <a class="xref" href="capturing-options.html" title="Setting Traffic Capturing Options">Setting Traffic Capturing Options</a>
for more details.</p><p>If you use the <code class="literal">af_packet</code> sniffer, you can tune its behaviour by specifying the
following options:</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_buffer_size_mb"></a>buffer_size_mb<a href="https://github.com/elastic/beats/edit/1.2/packetbeat/docs/reference/configuration/packetbeat-options.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The maximum size of the shared memory buffer to use
between the kernel and user space. A bigger buffer usually results in lower CPU
usage, but consumes more memory. This setting is only available for the
<code class="literal">af_packet</code> sniffer type. The default is 30 MB.</p><p>Example:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: eth0
  type: af_packet
  buffer_size_mb: 100</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_with_vlans"></a>with_vlans<a href="https://github.com/elastic/beats/edit/1.2/packetbeat/docs/reference/configuration/packetbeat-options.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Packetbeat automatically generates a
<a class="ulink" href="https://en.wikipedia.org/wiki/Berkeley_Packet_Filter" target="_top">BPF</a> for capturing only
the traffic on ports where it expects to find known protocols.
For example, if you have configured port 80 for HTTP and port 3306 for MySQL,
Packetbeat generates the following BPF filter: <code class="literal">"port 80 or port 3306"</code>.</p><p>However, if the traffic contains <a class="ulink" href="https://en.wikipedia.org/wiki/IEEE_802.1Q" target="_top">VLAN</a>
tags, the filter that Packetbeat generates is ineffective because the
offset is moved by four bytes. To fix this, you can enable the <code class="literal">with_vlans</code> option, which
generates a BPF filter that looks like this: <code class="literal">"port 80 or port 3306 or (vlan and (port 80 or port 3306))"</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_bpf_filter"></a>bpf_filter<a href="https://github.com/elastic/beats/edit/1.2/packetbeat/docs/reference/configuration/packetbeat-options.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Packetbeat automatically generates a
<a class="ulink" href="https://en.wikipedia.org/wiki/Berkeley_Packet_Filter" target="_top">BPF</a> for capturing only
the traffic on ports where it expects to find known protocols.
For example, if you have configured port 80 for HTTP and port 3306 for MySQL,
Packetbeat generates the following BPF filter: <code class="literal">"port 80 or port 3306"</code>.</p><p>You can use the <code class="literal">bpf_filter</code> setting to overwrite the generated BPF filter. For example:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: eth0
  bpf_filter: "net 192.168.238.0/0 and port 80 and port 3306"</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>This setting disables automatic generation of the BPF filter. If
you use this setting, it’s your responsibility to keep the BPF filters in sync with the
ports defined in the <code class="literal">protocols</code> section.</p></div></div></div></div></div><div class="navfooter"><span class="prev"><a href="packetbeat-configuration.html">
              « 
              Configuration Options</a>
           
        </span><span class="next">
           
          <a href="configuration-protocols.html">Protocols
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}</script>
  </body>
</html>
