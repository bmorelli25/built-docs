<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configure index lifecycle management
        | Journalbeat Reference [7.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Journalbeat Reference [7.1]" /><link rel="up" href="configuring-howto-journalbeat.html" title="Configuring Journalbeat" /><link rel="prev" href="configuration-output-codec.html" title="Change the output codec" /><link rel="next" href="configuration-ssl.html" title="Specify SSL settings" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Journalbeat/Reference/7.1" /><meta name="DC.subject" content="Journalbeat" /><meta name="DC.identifier" content="7.1" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">This functionality is experimental and may be changed or removed completely in a
future release. Elastic will take a best effort approach to fix any issues, but
experimental features are not subject to the support SLA of official GA
features.</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Journalbeat Reference
      [7.1]
    </a></span> » <span class="breadcrumb-link"><a href="configuring-howto-journalbeat.html">Configuring Journalbeat</a></span> » <span class="breadcrumb-node">Configure index lifecycle management</span></div><div class="navheader"><span class="prev"><a href="configuration-output-codec.html">
              « 
              Change the output codec</a>
           
        </span><span class="next">
           
          <a href="configuration-ssl.html">Specify SSL settings
               »
            </a></span></div><div class="xpack chapter"><div class="titlepage"><div><div><h2 class="title"><a id="ilm"></a>Configure index lifecycle management<a href="https://github.com/elastic/beats/edit/7.1/libbeat/docs/shared-ilm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>Use the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.1/getting-started-index-lifecycle-management.html" target="_top">index lifecycle
management</a> feature in Elasticsearch to manage your Journalbeat indices as they age.
For example, instead of creating daily indices where index size can vary based
on the number of Beats and number of events sent, use an index lifecycle policy
to automate a rollover to a new index when the existing index reaches a
specified size or age.</p><p>Starting with version 7.0, Journalbeat uses index lifecycle management by
default when it connects to a cluster that supports lifecycle management.
Journalbeat loads the default policy automatically and applies it to any
indices created by Journalbeat.</p><p>You can view and edit the policy in the <span class="strong strong"><strong>Index lifecycle policies</strong></span> UI in Kibana.
For more information about working with the UI, see
<a class="ulink" href="https://www.elastic.co/guide/en/kibana/7.1/index-lifecycle-policies.html" target="_top">Index lifecyle policies</a>.</p><p>Example configuration:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">setup.ilm.enabled: auto
setup.ilm.rollover_alias: "journalbeat"
setup.ilm.pattern: "{now/d}-000001" <a id="CO9-1"></a><i class="conum" data-value="1"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO9-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
Date math is supported here. For more information, see
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.1/indices-rollover-index.html#_using_date_math_with_the_rollover_api" target="_top">Using
date math with the rollover API</a>.
</p></td></tr></table></div><h3><a id="_configuration_options_8"></a>Configuration options<a href="https://github.com/elastic/beats/edit/7.1/libbeat/docs/shared-ilm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>You can specify the following settings in the <code class="literal">setup.ilm</code> section of the
<code class="literal">journalbeat.yml</code> config file:</p><h4><a id="setup-ilm-option"></a><code class="literal">setup.ilm.enabled</code><a href="https://github.com/elastic/beats/edit/7.1/libbeat/docs/shared-ilm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Enables or disables index lifecycle management on any new indices created by
Journalbeat. Valid values are <code class="literal">true</code>, <code class="literal">false</code>, and <code class="literal">auto</code>. When <code class="literal">auto</code> (the
default) is specified on version 7.0 and later, Journalbeat automatically uses
index lifecycle management if the feature is enabled in Elasticsearch and has the
required license; otherwise, Journalbeat creates daily indices.</p><h4><a id="setup-ilm-rollover_alias-option"></a><code class="literal">setup.ilm.rollover_alias</code><a href="https://github.com/elastic/beats/edit/7.1/libbeat/docs/shared-ilm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The index lifecycle write alias name. The default is
<code class="literal">journalbeat-{agent.version}</code>. Setting this option changes the prefix
in the alias name. It doesn’t remove <code class="literal">agent.version</code> from the alias name.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>If you modify this setting after loading the index template, you must
overwrite the template to apply the changes.</p></div></div><h4><a id="setup-ilm-pattern-option"></a><code class="literal">setup.ilm.pattern</code><a href="https://github.com/elastic/beats/edit/7.1/libbeat/docs/shared-ilm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The rollover index pattern. The default is <code class="literal">%{now/d}-000001</code>.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>If you modify this setting after loading the index template, you must
overwrite the template to apply the changes.</p></div></div><h4><a id="setup-ilm-policy_name-option"></a><code class="literal">setup.ilm.policy_name</code><a href="https://github.com/elastic/beats/edit/7.1/libbeat/docs/shared-ilm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The name to use for the lifecycle policy. The default is
<code class="literal">journalbeat-{agent.version}</code>.</p><h4><a id="setup-ilm-policy_file-option"></a><code class="literal">setup.ilm.policy_file</code><a href="https://github.com/elastic/beats/edit/7.1/libbeat/docs/shared-ilm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The path to a JSON file that contains a lifecycle policy configuration. Use this
setting to load your own lifecycle policy.</p><p>For more information about lifecycle policies, see
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.1/set-up-lifecycle-policy.html" target="_top">Set up index lifecycle management policy</a> in
the <span class="emphasis"><em>Elasticsearch Reference</em></span>.</p><h4><a id="setup-ilm-check_exists-option"></a><code class="literal">setup.ilm.check_exists</code><a href="https://github.com/elastic/beats/edit/7.1/libbeat/docs/shared-ilm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>When set to <code class="literal">false</code>, disables the check for an existing lifecycle policy. The
default is <code class="literal">true</code>. You need to disable this check if the Journalbeat
user connecting to a secured cluster doesn’t have the <code class="literal">read_ilm</code> privilege.</p><p>If you set this option to <code class="literal">false</code>, set <code class="literal">setup.ilm.overwrite: true</code> so the
lifecycle policy can be installed.</p><h4><a id="setup-ilm-overwrite-option"></a><code class="literal">setup.ilm.overwrite</code><a href="https://github.com/elastic/beats/edit/7.1/libbeat/docs/shared-ilm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>When set to <code class="literal">true</code>, the lifecycle policy is overwritten at startup. The default
is <code class="literal">false</code>.</p></div><div class="navfooter"><span class="prev"><a href="configuration-output-codec.html">
              « 
              Change the output codec</a>
           
        </span><span class="next">
           
          <a href="configuration-ssl.html">Specify SSL settings
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}</script>
  </body>
</html>
